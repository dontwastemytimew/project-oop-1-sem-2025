#ifndef PROFILECARD_H
#define PROFILECARD_H

#include <QLabel>
#include <QWidget>
#include "UserProfile.h"

/**
 * @brief Віджет "Картка Профілю".
 *
 * Цей клас відповідає за візуальне відображення інформації про користувача
 * у вигляді картки (схоже на Tinder). Він компонує фото, ім'я, вік, місто,
 * біографію та теги в єдиний UI-елемент.
 *
 * Використовується переважно на сторінці пошуку (SearchPageWidget) для
 * показу кандидатів на метч.
 */
class ProfileCard : public QWidget
{
    Q_OBJECT

public:
    /**
     * @brief Конструктор ProfileCard.
     *
     * Налаштовує розмітку (layout), створює та стилізує внутрішні QLabel
     * (шрифти, кольори, вирівнювання) для відображення даних.
     *
     * @param parent Батьківський віджет.
     */
    explicit ProfileCard(QWidget* parent = nullptr);

    /**
     * @brief Заповнює картку даними з об'єкта UserProfile.
     *
     * Метод оновлює всі текстові поля (ім'я, вік, місто, біо) та завантажує
     * фотографію профілю. Якщо фото відсутнє, встановлюється заглушка (placeholder).
     * Також форматує та відображає список тегів.
     *
     * @param profile Об'єкт профілю користувача, дані якого треба показати.
     */
    void setProfileData(const UserProfile& profile);

    /**
     * @brief Встановлює та відображає відсоток сумісності.
     *
     * Оновлює відповідний лейбл на картці, додаючи значок "%" та
     * кольорове виділення (зазвичай рожеве або зелене).
     *
     * @param percent Число від 0 до 100.
     */
    void setCompatibilityPercent(int percent);

protected:
    /**
     * @brief Обробник подій зміни стану (зокрема, зміни мови).
     *
     * Викликає retranslateUi() для оновлення локалізованих частин інтерфейсу
     * (якщо такі є, наприклад, підписи "р." біля віку).
     *
     * @param event Подія.
     */
    void changeEvent(QEvent *event) override;

private:
    // UI Елементи
    QLabel* lblPhoto;           ///< Лейбл для відображення аватара користувача.
    QLabel* lblName;            ///< Лейбл для імені (великий шрифт).
    QLabel* lblAge;             ///< Лейбл для віку.
    QLabel* lblCity;            ///< Лейбл для назви міста.
    QLabel* lblDescription;     ///< Лейбл для біографії ("Про себе").
    QLabel* lblCompatibility;   ///< Лейбл для відображення відсотка сумісності.
    QLabel* lblTags;            ///< Лейбл для списку тегів (через кому або як бейджі).

    /**
     * @brief Оновлює тексти інтерфейсу при зміні мови.
     *
     * Перевстановлює форматування рядків, що залежать від мови
     * (наприклад, "25 років" vs "25 years").
     */
    void retranslateUi();

    int m_currentPercent = 0;   ///< Поточне значення відсотка сумісності.
    bool m_hasPhoto = false;    ///< Прапорець наявності реального фото (не заглушки).
};

#endif // PROFILECARD_H